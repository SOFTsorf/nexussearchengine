<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyStream - SoundCloud Edition</title>
    <script src="https://w.soundcloud.com/player/api.js"></script>
    <style>
        :root {
            --spotify-green: #1DB954;
            --bg-dark: #121212;
            --card-bg: #181818;
            --text-main: #ffffff;
            --text-dim: #b3b3b3;
        }

        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        header {
            padding: 20px 40px;
            background: #000;
        }

        .container {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 20px;
            overflow: hidden;
        }

        /* Playlist Bereich */
        .playlist-container {
            flex: 1;
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
        }

        .song-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
            margin-bottom: 5px;
        }

        .song-item:hover { background: #282828; }
        .song-item.active { color: var(--spotify-green); background: #282828; }

        .song-info { margin-left: 15px; }
        .song-info div { font-size: 14px; color: var(--text-dim); }

        /* Widget Bereich (Versteckt oder Sichtbar) */
        .player-sidebar {
            width: 350px;
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        iframe {
            border: none;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .custom-controls {
            width: 100%;
            text-align: center;
        }

        button {
            background: var(--spotify-green);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
        }

        button:hover { transform: scale(1.05); }
    </style>
</head>
<body>

<header>
    <h1 style="color: var(--spotify-green); margin: 0;">MyStream 2026</h1>
</header>

<div class="container">
    <div class="playlist-container">
        <h2>Deine Playlist</h2>
        <div id="playlist">
            </div>
    </div>

    <div class="player-sidebar">
        <h3>Aktueller Player</h3>
        <iframe id="sc-player" width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" 
            src="https://w.soundcloud.com/player/?url=https://soundcloud.com/discover/sets/charts-top-50:all-music">
        </iframe>

        <div class="custom-controls">
            <button onclick="prevTrack()">⏮</button>
            <button onclick="togglePlay()">Play / Pause</button>
            <button onclick="nextTrack()">⏭</button>
        </div>
        <p id="now-playing" style="margin-top: 20px; color: var(--text-dim); font-size: 0.9em;"></p>
    </div>
</div>

<script>
    // Liste von SoundCloud-URLs (Hier kannst du jeden beliebigen SC-Link einfügen!)
    const trackList = [
        { title: "Lofi Hip Hop", artist: "Lofi Girl", url: "https://soundcloud.com/lofi-girl/beats-to-relax-study-to" },
        { title: "Electronic Vibes", artist: "SoundCloud Artist", url: "https://soundcloud.com/glitchhop/the-fat-rat-xenogenesis" },
        { title: "Chill Out", artist: "NCS", url: "https://soundcloud.com/nocopyrightsounds/alan-walker-fade-ncs-release" }
    ];

    const iframe = document.getElementById('sc-player');
    const widget = SC.Widget(iframe);
    const playlistDiv = document.getElementById('playlist');
    let currentIndex = 0;

    // Playlist rendern
    function initPlaylist() {
        playlistDiv.innerHTML = "";
        trackList.forEach((track, index) => {
            const item = document.createElement('div');
            item.className = `song-item ${index === currentIndex ? 'active' : ''}`;
            item.innerHTML = `
                <strong>${index + 1}</strong>
                <div class="song-info">
                    <strong>${track.title}</strong>
                    <div>${track.artist}</div>
                </div>
            `;
            item.onclick = () => playTrack(index);
            playlistDiv.appendChild(item);
        });
    }

    // Einen bestimmten Track laden
    function playTrack(index) {
        currentIndex = index;
        const track = trackList[index];
        
        // Lädt die neue URL in das Widget
        widget.load(track.url, {
            auto_play: true,
            show_comments: false,
            color: "#1DB954"
        });

        document.getElementById('now-playing').innerText = "Spielt gerade: " + track.title;
        initPlaylist(); // UI aktualisieren
    }

    function togglePlay() {
        widget.toggle();
    }

    function nextTrack() {
        currentIndex = (currentIndex + 1) % trackList.length;
        playTrack(currentIndex);
    }

    function prevTrack() {
        currentIndex = (currentIndex - 1 + trackList.length) % trackList.length;
        playTrack(currentIndex);
    }

    // Event: Wenn ein Song zu Ende ist
    widget.bind(SC.Widget.Events.FINISH, () => {
        nextTrack();
    });

    // Initialisierung
    initPlaylist();
    document.getElementById('now-playing').innerText = "Wähle einen Song aus der Liste.";
</script>

</body>
</html>
